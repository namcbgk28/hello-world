<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<title>Employee Management</title>
	<h:outputStylesheet library="css" name="style.css" />
</h:head>
<h:body>
	<div class="container">
		<h1>Employee Management</h1>

		<h:outputText value="#{employeeBean.message}"
			rendered="#{employeeBean.message != null}" styleClass="message" />

		<!-- Action Buttons -->
		<h:form id="employeeForm">

			<!-- Action Buttons -->
			<div class="action-buttons">
				<h:commandButton value="Add New Employee"
					styleClass="btn btn-primary">
					<f:ajax listener="#{layoutBean.loadPage('/employee/create.xhtml')}"
						execute="@this" render=":contentArea" />
				</h:commandButton>

				<h:commandButton value="Load All"
					action="#{employeeBean.loadAllEmployees}"
					styleClass="btn btn-success">
					<f:ajax execute="@this" render="mainContent" />
				</h:commandButton>

				<h:commandButton value="Test Connection"
					action="#{employeeBean.testConnection}" styleClass="btn btn-info">
					<f:ajax execute="@this" render="contentArea" />
				</h:commandButton>
			</div>

			<!-- Main Content Area -->
			<h:panelGroup id="mainContent">
				<!-- Employee List -->
				<h:panelGroup
					rendered="#{employeeBean.employees != null and employeeBean.employees.size() > 0 and employeeBean.isViewMode()}">
					<h3>Employee List (#{employeeBean.employees.size()} employees)</h3>
					<h:dataTable value="#{employeeBean.employees}" var="emp"
						styleClass="employee-table" headerClass="table-header"
						rowClasses="table-row-odd,table-row-even">
						<h:column>
							<f:facet name="header">Employee Code</f:facet>
                        #{emp.employeeCode}
                    </h:column>
						<h:column>
							<f:facet name="header">Employee Name</f:facet>
                        #{emp.employeeName}
                    </h:column>
						<h:column>
							<f:facet name="header">Age</f:facet>
                        #{emp.employeeAge}
                    </h:column>
						<h:column>
							<f:facet name="header">Date of Birth</f:facet>
                        #{emp.dateOfBirth}
                    </h:column>
						<h:column>
							<f:facet name="header">Actions</f:facet>
							<div class="action-buttons-inline">
								<h:commandButton value="View"
									action="#{employeeBean.viewEmployee(emp)}"
									styleClass="btn btn-sm btn-info">
									<f:ajax execute="@this" render="mainContent" />
								</h:commandButton>
								<h:commandButton value="Edit"
									action="#{employeeBean.prepareEditEmployee(emp)}"
									styleClass="btn btn-sm btn-warning" />
								<h:commandButton value="Delete"
									action="#{employeeBean.deleteEmployee(emp)}"
									styleClass="btn btn-sm btn-danger"
									onclick="return confirm('Are you sure you want to delete this employee?')" />
							</div>
						</h:column>
					</h:dataTable>
				</h:panelGroup>

				<!-- No Data Message -->
				<h:panelGroup
					rendered="#{employeeBean.employees == null or employeeBean.employees.size() == 0 and employeeBean.isViewMode()}">
					<div class="no-data">
						<p>No employee data available.</p>
						<p>Please check database connection and try again.</p>
					</div>
				</h:panelGroup>

			</h:panelGroup>
		</h:form>
	</div>
</h:body>
</html>